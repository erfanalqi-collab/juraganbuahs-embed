<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>DEBUG ‚Äî Juragan Buah Store</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-firestore-compat.js"></script>

<style>
body { margin:0; padding:20px; font-family:sans-serif; background:#fff; }
.debug-box {
  background:#ffe9e9;
  border:1px solid #ff6f6f;
  padding:10px;
  margin-bottom:15px;
  border-radius:8px;
  color:#900;
}
#juraganbuah-store { 
  display:grid; 
  grid-template-columns:repeat(2,1fr); 
  gap:15px; 
}
.item { border:1px solid #eee; padding:10px; border-radius:10px; }
.item img { width:100%; border-radius:10px; }
.buy { display:block; margin-top:10px; padding:10px; background:#16a34a; color:#fff;
       text-align:center; border-radius:8px; text-decoration:none; }
</style>
</head>
<body>

<h2>üõ†Ô∏è Debug Mode ‚Äî Juragan Buah Store</h2>

<div id="debug-area" class="debug-box">
‚è≥ Debug aktif‚Ä¶ menunggu script berjalan‚Ä¶
</div>

<div id="juraganbuah-store">Memuat produk...</div>

<!-- LOAD STORE.JS dengan ERROR CHECK -->
<script>
function debug(msg) {
  console.log("[DEBUG]", msg);
  document.getElementById("debug-area").innerHTML += "<br>üî∏ " + msg;
}

// cek load store.js
debug("Memuat store.js dari Netlify...");

var s = document.createElement("script");
s.src = "https://juraganbuah-admins.netlify.app/store.js";
s.onload = () => debug("‚úì store.js berhasil dimuat");
s.onerror = () => debug("‚ùå GAGAL memuat store.js ‚Äî cek URL Netlify!");
document.body.appendChild(s);
</script>

<!-- FIREBASE CONNECTION DEBUG -->
<script>
// Tes Firebase config
debug("Menjalankan inisialisasi Firebase...");

// CONFIG WAJIB: SAMAKAN DENGAN PROJECTMU
const firebaseConfig = {
  apiKey: "AIzaSyDYAJ5IYELYkRYsC2krPNe4M93x2GHHTIM",
  authDomain: "juraganbuah-59893.firebaseapp.com",
  projectId: "juraganbuah-59893",
  storageBucket: "juraganbuah-59893.appspot.com",
  messagingSenderId: "1076891697892",
  appId: "1:1076891692:web:41ec91709a4b992be222f1"
};

try {
  firebase.initializeApp(firebaseConfig);
  debug("‚úì Firebase berhasil diinisialisasi");
} catch(e) {
  debug("‚ùå Firebase gagal init: " + e.message);
}

var db = firebase.firestore();

debug("Mengambil produk dari Firestore...");

// QUERY PRODUCT
db.collection("products")
  .get()
  .then(snapshot => {
    if (snapshot.empty) {
      debug("‚ö† Firestore KOSONG ‚Äî tidak ada produk.");
      document.getElementById("juraganbuah-store").innerHTML = 
        "<p>Tidak ada produk ditemukan.</p>";
      return;
    }

    debug("‚úì Produk ditemukan: " + snapshot.size);
    let html = "";

    snapshot.forEach(doc => {
      debug("Product ID: " + doc.id);
      const p = doc.data();
      html += `
        <div class="item">
          <img src="${p.imageUrl || ''}">
          <h4>${p.name || '(Tanpa nama)'}</h4>
          <p>${p.price || ''}</p>
          <a class="buy" href="https://wa.me/6285736464806?text=Halo%20saya%20ingin%20beli%20${encodeURIComponent(p.name)}">Beli</a>
        </div>
      `;
    });

    document.getElementById("juraganbuah-store").innerHTML = html;
  })
  .catch(err => {
    debug("‚ùå ERROR Firestore: " + err.message);
    document.getElementById("juraganbuah-store").innerHTML = 
      "<p>Gagal memuat produk.</p>";
  });
</script>

</body>
</html>